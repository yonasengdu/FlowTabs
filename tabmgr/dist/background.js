(()=>{"use strict";var t={795:function(t,e){var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function c(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.initializeMruList=function(){return n(this,void 0,void 0,function*(){const t=yield chrome.tabs.query({});r=t.map(t=>t.id);const e=yield chrome.storage.local.get("mruTabIds");if(e.mruTabIds){const n=new Set(t.map(t=>t.id));r=e.mruTabIds.filter(t=>n.has(t))}})},e.updateMruList=function(t){r=r.filter(e=>e!==t),r.unshift(t),i()},e.removeTabFromMru=function(t){r=r.filter(e=>e!==t),i()},e.getTabDetails=function(){return n(this,void 0,void 0,function*(){const t=yield chrome.tabs.query({windowType:"normal"}),e=new Map(t.map(t=>[t.id,t]));return r.map(t=>e.get(t)).filter(t=>!!t)})};let r=[];function i(){chrome.storage.local.set({mruTabIds:r})}},922:function(t,e,n){var r,i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||(r=function(t){return r=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[e.length]=n);return e},r(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n=r(t),a=0;a<n.length;a++)"default"!==n[a]&&i(e,t,n[a]);return o(e,t),e}),c=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function c(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const u=a(n(795));chrome.runtime.onStartup.addListener(()=>u.initializeMruList()),chrome.runtime.onInstalled.addListener(()=>u.initializeMruList()),chrome.tabs.onActivated.addListener(t=>u.updateMruList(t.tabId)),chrome.tabs.onRemoved.addListener(t=>u.removeTabFromMru(t)),chrome.commands.onCommand.addListener(t=>c(void 0,void 0,void 0,function*(){if("alt-q-switch"!==t)return;const[e]=yield chrome.tabs.query({active:!0,currentWindow:!0});if(!(!(null==e?void 0:e.id)||e.url&&e.url.startsWith("chrome://")))try{yield chrome.scripting.executeScript({target:{tabId:e.id},files:["content.js"]});const t={type:"shortcut-pressed"};chrome.tabs.sendMessage(e.id,t)}catch(t){console.warn(`Alt+Q: Could not inject script into tab ${e.id}: ${t.message}`)}})),chrome.runtime.onMessage.addListener((t,e,n)=>{if("request-tab-list"===t.type)return u.getTabDetails().then(n),!0;"switch-to-tab"===t.type&&chrome.tabs.update(t.tabId,{active:!0})}),chrome.runtime.onConnect.addListener(t=>{t.name})}},e={};!function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}(922)})();